<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Panel Cliente | Rapicréditos</title>

        <!-- Fuentes y Bootstrap -->
        <link
            href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@600&family=Roboto&display=swap"
            rel="stylesheet"
        />
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
            rel="stylesheet"
        />
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
            rel="stylesheet"
        />
        <link rel="stylesheet" href="../css/style.css" />
        <link rel="stylesheet" href="../css/components/interfazCliente.css" />
    </head>
    <body>
        <!-- HEADER dinámico -->
        <div id="header-placeholder"></div>

        <main class="container-xxl py-4">
            <h2 class="panel-title mb-3">Panel de Cliente</h2>

            <!-- Botón solicitar crédito -->
            <div class="mb-3">
                <button
                    class="btn btn-success"
                    data-bs-toggle="modal"
                    data-bs-target="#modalSolicitudCredito"
                >
                    <i class="bi bi-plus-circle me-2"></i>Solicitar crédito
                </button>
            </div>

            <!-- Modal Solicitud de Crédito -->
            <div class="modal fade" id="modalSolicitudCredito" tabindex="-1">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header bg-primary text-white">
                            <h5 class="modal-title">Solicitud de Crédito</h5>
                            <button
                                type="button"
                                class="btn-close"
                                data-bs-dismiss="modal"
                            ></button>
                        </div>
                        <form id="formSolicitudCredito">
                            <div class="modal-body">
                                <div class="mb-3">
                                    <label
                                        for="montoSolicitud"
                                        class="form-label"
                                        >Monto</label
                                    >
                                    <input
                                        type="number"
                                        min="1"
                                        step="0.01"
                                        class="form-control"
                                        id="montoSolicitud"
                                        name="montoSolicitud"
                                        required
                                    />
                                </div>
                                <div class="mb-3">
                                    <label
                                        for="cuotasSolicitud"
                                        class="form-label"
                                        >Cuotas</label
                                    >
                                    <input
                                        type="number"
                                        min="1"
                                        step="1"
                                        class="form-control"
                                        id="cuotasSolicitud"
                                        name="cuotasSolicitud"
                                        required
                                    />
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button
                                    type="button"
                                    class="btn btn-secondary"
                                    data-bs-dismiss="modal"
                                >
                                    Cancelar
                                </button>
                                <button type="submit" class="btn btn-success">
                                    Enviar solicitud
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Alerta dinámica (se muestra/oculta desde JS) -->
            <div
                id="alertaCliente"
                class="alert alert-warning d-none"
                role="alert"
            >
                <!-- Contenido dinámico -->
            </div>

            <!-- Resumen con barra de progreso -->
            <div class="row g-4 mb-4">
                <div class="col-lg-4 col-md-6">
                    <div class="card resumen-card h-100 text-center">
                        <div class="card-body">
                            <i class="bi bi-cash-stack fs-1 text-rojo"></i>
                            <h6 class="mt-2">Próxima cuota</h6>
                            <p class="fw-bold fs-5" id="proxCuota">$0,00</p>
                            <small id="proxFecha">dd/mm/aaaa</small>
                        </div>
                    </div>
                </div>

                <div class="col-lg-4 col-md-6">
                    <div class="card resumen-card h-100 text-center">
                        <div class="card-body">
                            <i class="bi bi-calendar-check fs-1 text-azul"></i>
                            <h6 class="mt-2">Progreso de pago</h6>
                            <div class="progress mt-2" style="height: 8px">
                                <div
                                    id="barraProgreso"
                                    class="progress-bar bg-rojo"
                                    role="progressbar"
                                    style="width: 0%"
                                ></div>
                            </div>

                            <!-- Gráfico circular complementario -->
                            <div class="mt-3 d-flex justify-content-center">
                                <canvas
                                    id="graficoProgreso"
                                    width="140"
                                    height="140"
                                ></canvas>
                            </div>

                            <small id="cuotasPagasCard"
                                >0 / 0 cuotas pagadas</small
                            >
                        </div>
                    </div>
                </div>

                <div class="col-lg-4 col-md-12">
                    <div class="card resumen-card h-100 text-center">
                        <div class="card-body">
                            <i class="bi bi-bar-chart-line fs-1 text-rojo"></i>
                            <h6 class="mt-2">Estado</h6>
                            <p class="fw-bold" id="estadoCuentaCard">Al día</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Acciones rápidas -->
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-azul text-white">
                    <i class="bi bi-lightning me-2"></i>Acciones rápidas
                </div>
                <div class="card-body d-flex flex-wrap gap-2">
                    <button class="btn btn-rojo flex-fill" id="btnPagarAhora">
                        <i class="bi bi-credit-card me-2"></i>Pagar ahora
                    </button>
                    <button
                        class="btn btn-outline-azul flex-fill"
                        id="btnDescargarPlan"
                    >
                        <i class="bi bi-download me-2"></i>Descargar plan (PDF)
                    </button>
                    <button
                        class="btn btn-outline-azul flex-fill"
                        id="btnSolicitarRefi"
                    >
                        <i class="bi bi-arrow-repeat me-2"></i>Solicitar
                        refinanciación
                    </button>
                </div>
            </div>

            <!-- Detalles del crédito -->
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-rojo text-white">
                    <i class="bi bi-info-circle me-2"></i>Detalles del crédito
                </div>
                <div class="card-body row">
                    <div class="col-md-6">
                        <p>
                            <strong>Monto otorgado:</strong>
                            <span id="montoOtorgado">$0,00</span>
                        </p>
                        <p>
                            <strong>Tasa:</strong>
                            <span id="tasaCredito">0%</span>
                        </p>
                        <p>
                            <strong>Plazo:</strong>
                            <span id="plazoCredito">-- meses</span>
                        </p>
                    </div>
                    <div class="col-md-6">
                        <p>
                            <strong>Saldo restante:</strong>
                            <span id="saldoRestante">$0,00</span>
                        </p>
                        <p>
                            <strong>Fecha de inicio:</strong>
                            <span id="fechaInicio">dd/mm/aaaa</span>
                        </p>
                        <p>
                            <strong>Fecha de finalización:</strong>
                            <span id="fechaFin">dd/mm/aaaa</span>
                        </p>
                    </div>
                </div>
            </div>

            <!-- Historial de pagos -->
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-azul text-white">
                    <i class="bi bi-list-columns-reverse me-2"></i>Historial de
                    pagos
                </div>
                <div class="card-body table-responsive">
                    <table class="table table-sm align-middle" id="tablaCuotas">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Fecha</th>
                                <th>Monto</th>
                                <th>Estado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Datos dinámicos desde JS -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Soporte -->
            <div class="card shadow-sm">
                <div class="card-header bg-rojo text-white">
                    <i class="bi bi-headset me-2"></i>Soporte
                </div>
                <div class="card-body">
                    <p>
                        Horario de atención: Lunes a Viernes de 9:00 a 18:00 hs.
                    </p>
                    <p>
                        <i class="bi bi-whatsapp text-success me-2"></i
                        ><a href="https://wa.me/+542284555478" target="_blank"
                            >WhatsApp Soporte</a
                        >
                    </p>
                    <p>
                        <i class="bi bi-envelope-fill text-danger me-2"></i
                        ><a href="mailto:soporte@rapicreditos.com"
                            >soporte@rapicreditos.com</a
                        >
                    </p>
                    <p>
                        <i
                            class="bi bi-chat-left-text-fill text-primary me-2"
                        ></i
                        ><a href="../info/contacto.html"
                            >Formulario de contacto</a
                        >
                    </p>
                </div>
            </div>
        </main>

        <!-- Modal Detalle Cuota -->
        <div class="modal fade" id="modalDetalleCuota" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header bg-azul text-white">
                        <h5 class="modal-title">Detalle de cuota</h5>
                        <button
                            type="button"
                            class="btn-close"
                            data-bs-dismiss="modal"
                        ></button>
                    </div>
                    <div class="modal-body">
                        <p>
                            <strong>N° de cuota:</strong>
                            <span id="detalleNum"></span>
                        </p>
                        <p>
                            <strong>Fecha vencimiento:</strong>
                            <span id="detalleFecha"></span>
                        </p>
                        <p>
                            <strong>Monto:</strong>
                            <span id="detalleMonto"></span>
                        </p>
                        <p>
                            <strong>Capital pagado:</strong>
                            <span id="detalleCapital"></span>
                        </p>
                        <p>
                            <strong>Intereses pagados:</strong>
                            <span id="detalleInteres"></span>
                        </p>
                        <p>
                            <strong>Saldo restante:</strong>
                            <span id="detalleSaldo"></span>
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- FOOTER dinámico -->
        <div id="footer-placeholder"></div>

        <div class="container-boton-Whatsapp">
            <a
                href="https://wa.me/+542284555478?text=En%20que%20podemos%20ayudarte?%20..."
                target="_blank"
            >
                <img class="boton" src="/assets/iconow.png" alt="Whatsapp" />
            </a>
        </div>

        <!-- Librerías necesarias -->
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

        <!-- Scripts -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
        <script
            type="module"
            src="../js/components/interfazCliente.js"
        ></script>
        <script src="../js/load-partials.js"></script>
    </body>
</html>
